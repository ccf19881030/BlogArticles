# .NET 正则表达式
正则表达式提供了功能强大、灵活而又高效的方法来处理文本。 正则表达式丰富的泛模式匹配表示法使你可以快速分析大量文本，以便：
  * 查找特定字符模式。
  * 验证文本以确保它匹配预定义模式（如电子邮件地址）。
  * 提取、编辑、替换或删除文本子字符串。
  * 将提取的字符串添加到集合中，以便生成报告。
对于处理字符串或分析大文本块的许多应用程序而言，正则表达式是不可缺少的工具。

# 正则表达式的工作方式
使用正则表达式处理文本的中心构件是正则表达式引擎（由 .NET 中的 [System.Text.RegularExpressions.Regex](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.regex) 对象表示）。 使用正则表达式处理文本至少要求向该正则表达式引擎提供以下两方面的信息：
  * 要在文本中标识的正则表达式模式。
在 .NET 中，正则表达式模式用特殊的语法或语言定义，该语法或语言与 Perl 5 正则表达式兼容，并添加了一些其他功能，例如从右到左匹配。 有关更多信息，请参见[正则表达式语言 - 快速参考](https://docs.microsoft.com/zh-cn/dotnet/standard/base-types/regular-expression-language-quick-reference)。
  * 要为正则表达式模式分析的文本。
  
[Regex](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.regex)类的方法使你可以执行以下操作：
  * 通过调用 [Regex.IsMatch](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.regex.ismatch) 方法确定输入文本中是否具有正则表达式模式。 有关使用 [IsMatch](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.regex.ismatch) 方法验证文本的示例，请参阅[如何：确认字符串是有效的电子邮件格式](https://docs.microsoft.com/zh-cn/dotnet/standard/base-types/how-to-verify-that-strings-are-in-valid-email-format)。
  * 通过调用 [Regex.Match](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.regex.match) 或 [Regex.Matches](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.regex.matches) 方法检索匹配正则表达式模式的一个或所有文本匹配项。 第一个方法返回提供有关匹配文本的信息的 [System.Text.RegularExpressions.Match](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.match) 对象。 第二个方法返回 [MatchCollection](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.matchcollection) 对象，该对象对于在分析的文本中找到的每个匹配项包含一个 [System.Text.RegularExpressions.Match](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.match) 对象。
  * 通过调用 [Regex.Replace](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.regex.replace) 方法替换匹配正则表达式模式的文本。 有关使用 [Replace](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.regex.replace) 方法更改日期格式和移除字符串中的无效字符的示例，请参阅[如何：从字符串中剥离无效字符](https://docs.microsoft.com/zh-cn/dotnet/standard/base-types/how-to-strip-invalid-characters-from-a-string)以及[示例：更改日期格式](https://docs.microsoft.com/zh-cn/dotnet/standard/base-types/regular-expression-example-changing-date-formats)。
  
有关正则表达式对象模型的概述，请参见[正则表达式对象模型](https://docs.microsoft.com/zh-cn/dotnet/standard/base-types/the-regular-expression-object-model)

若要详细了解正则表达式语言，请参阅正则表达式语言-快速参考](https://docs.microsoft.com/zh-cn/dotnet/standard/base-types/regular-expression-language-quick-reference)，或下载和打印下面的小册子之一：
  * [快速参考（Word (.docx) 格式）](https://download.microsoft.com/download/D/2/4/D240EBF6-A9BA-4E4F-A63F-AEB6DA0B921C/Regular%20expressions%20quick%20reference.docx)
  * [快速参考（PDF (.pdf) 格式）](https://download.microsoft.com/download/D/2/4/D240EBF6-A9BA-4E4F-A63F-AEB6DA0B921C/Regular%20expressions%20quick%20reference.pdf)
  
# 正则表达式示例
[String](https://docs.microsoft.com/zh-cn/dotnet/api/system.string)类包括许多字符串搜索和替换方法，当你要在较大字符串中定位文本字符串时，可以使用这些方法。 当你希望在较大字符串中定位若干子字符串之一时，或者当你希望在字符串中标识模式时，正则表达式最有用，如以下示例所示。
`警告`
如果使用 [System.Text.RegularExpressions](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions) 处理不受信任的输入，则传递一个超时。 恶意用户可能会向 `RegularExpressions` 提供输入，从而导致`拒绝服务攻击`。 使用 `RegularExpressions` 的 ASP.NET Core 框架 API 会传递一个超时。

`提示`
[System.Web.RegularExpressions](https://docs.microsoft.com/zh-cn/dotnet/api/system.web.regularexpressions) 命名空间包含大量正则表达式对象，这些对象实现预定义的正则表达式模式，用于分析 HTML、XML 和 ASP.NET 文档中的字符串。 例如，[TagRegex](https://docs.microsoft.com/zh-cn/dotnet/api/system.web.regularexpressions.tagregex) 类标识字符串中的开始标记，[CommentRegex](https://docs.microsoft.com/zh-cn/dotnet/api/system.web.regularexpressions.commentregex) 类标识字符串中的 ASP.NET 注释。

## 示例 1：替换子字符串
假设一个邮件列表包含一些姓名，这些姓名有时包括称谓（Mr.、Mrs.、Miss 或 Ms.）以及姓氏和名字。 如果你从列表中生成信封标签时不希望包括称谓，则可以使用正则表达式移除称谓，如以下示例所示。
```C#
using System;
using System.Text.RegularExpressions;

public class Example
{
   public static void Main()
   {
      string pattern = "(Mr\\.? |Mrs\\.? |Miss |Ms\\.? )";
      string[] names = { "Mr. Henry Hunt", "Ms. Sara Samuels",
                         "Abraham Adams", "Ms. Nicole Norris" };
      foreach (string name in names)
         Console.WriteLine(Regex.Replace(name, pattern, String.Empty));
   }
}
// The example displays the following output:
//    Henry Hunt
//    Sara Samuels
//    Abraham Adams
//    Nicole Norris
```
正则表达式模式 `(Mr\.? |Mrs\.? |Miss |Ms\.? )` 可匹配任何“Mr”、“Mr.”、“Mrs”、“Mrs.”、“Miss”、“Ms”或“Ms.”。 对 [Regex.Replace](https://docs.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.regex.replace) 方法的调用会将匹配的字符串替换为 [String.Empty](https://docs.microsoft.com/zh-cn/dotnet/api/system.string.empty)；换句话说，将其从原始字符串中移除。


